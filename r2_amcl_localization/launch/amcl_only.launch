<launch>
  <arg name="map_yaml" default="$(env HOME)/maps/home2.yaml"/>
  <arg name="scan_topic" default="/scan"/>
  <arg name="odom_topic" default="/odom"/>

  <arg name="base_frame" default="base_footprint"/>
  <arg name="odom_frame" default="odom"/>
  <arg name="map_frame"  default="map"/>

  <arg name="amcl_yaml" default="$(find r2_amcl_localization)/config/amcl.yaml"/>

  <node pkg="map_server" type="map_server" name="map_server" args="$(arg map_yaml)" output="screen"/>

  <node pkg="amcl" type="amcl" name="amcl" output="screen" clear_params="true">
    <rosparam file="$(arg amcl_yaml)" command="load"/>
    <param name="base_frame_id" value="$(arg base_frame)"/>
    <param name="odom_frame_id" value="$(arg odom_frame)"/>
    <param name="global_frame_id" value="$(arg map_frame)"/>
    <remap from="scan" to="$(arg scan_topic)"/>
    <remap from="odom" to="$(arg odom_topic)"/>
  </node>
</launch>
